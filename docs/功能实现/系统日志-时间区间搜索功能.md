# ç³»ç»Ÿæ—¥å¿— - æ“ä½œæ—¶é—´åŒºé—´æœç´¢åŠŸèƒ½

## ğŸ“… å®ç°æ—¥æœŸ
2025-11-17

---

## ğŸ¯ åŠŸèƒ½è¯´æ˜

ä¸ºç³»ç»Ÿæ—¥å¿—é¡µé¢æ·»åŠ æ“ä½œæ—¶é—´åŒºé—´æœç´¢åŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·æŒ‰ç…§æ—¶é—´èŒƒå›´ç­›é€‰æ—¥å¿—è®°å½•ã€‚

---

## ğŸ“Š åŠŸèƒ½ç‰¹æ€§

### 1. æ—¶é—´èŒƒå›´é€‰æ‹©å™¨

- **ç»„ä»¶ç±»å‹**ï¼š`RangePicker`ï¼ˆAnt Design Vue æ—¥æœŸèŒƒå›´é€‰æ‹©å™¨ï¼‰
- **æ”¯æŒæ—¶åˆ†ç§’**ï¼š`showTime: true`
- **æ—¶é—´æ ¼å¼**ï¼š`YYYY-MM-DD HH:mm:ss`
- **å¯æ¸…ç©º**ï¼š`allowClear: true`
- **å ä½ç¬¦**ï¼š`['å¼€å§‹æ—¶é—´', 'ç»“æŸæ—¶é—´']`

### 2. è¿‡æ»¤é€»è¾‘

- æ ¹æ®é€‰æ‹©çš„å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´è¿‡æ»¤æ—¥å¿—
- ä½¿ç”¨ `dayjs` è¿›è¡Œæ—¶é—´æ¯”è¾ƒ
- æ”¯æŒç²¾ç¡®åˆ°ç§’çš„æ—¶é—´ç­›é€‰
- ä¸å…¶ä»–ç­›é€‰æ¡ä»¶ï¼ˆæ“ä½œç±»å‹ã€çŠ¶æ€ã€ç›®æ ‡ï¼‰ç»„åˆä½¿ç”¨

---

## ğŸ”§ å®ç°ç»†èŠ‚

### 1. æœç´¢è¡¨å•é…ç½®

åœ¨ `formOptions.schema` ä¸­æ·»åŠ æ—¶é—´èŒƒå›´å­—æ®µï¼š

```typescript
{
  fieldName: 'timeRange',
  component: 'RangePicker',
  label: 'æ“ä½œæ—¶é—´',
  componentProps: {
    placeholder: ['å¼€å§‹æ—¶é—´', 'ç»“æŸæ—¶é—´'],
    showTime: true,
    format: 'YYYY-MM-DD HH:mm:ss',
    allowClear: true,
    style: { width: '100%' }
  }
}
```

### 2. è¿‡æ»¤é€»è¾‘å®ç°

åœ¨ `proxyConfig.ajax.query` ä¸­æ·»åŠ æ—¶é—´èŒƒå›´è¿‡æ»¤ï¼š

```typescript
// æ“ä½œæ—¶é—´åŒºé—´è¿‡æ»¤
if (formValues?.timeRange && formValues.timeRange.length === 2) {
  const [startTime, endTime] = formValues.timeRange
  filtered = filtered.filter((log: SysLog) => {
    const logTime = dayjs(log.createTime)
    return logTime.isAfter(dayjs(startTime)) && logTime.isBefore(dayjs(endTime))
  })
}
```

---

## ğŸ“ ä½¿ç”¨è¯´æ˜

### 1. é€‰æ‹©æ—¶é—´èŒƒå›´

1. ç‚¹å‡»"æ“ä½œæ—¶é—´"è¾“å…¥æ¡†
2. åœ¨å¼¹å‡ºçš„æ—¥æœŸé€‰æ‹©å™¨ä¸­é€‰æ‹©å¼€å§‹æ—¥æœŸå’Œæ—¶é—´
3. é€‰æ‹©ç»“æŸæ—¥æœŸå’Œæ—¶é—´
4. ç‚¹å‡»"ç¡®å®š"æŒ‰é’®

### 2. æœç´¢æ—¥å¿—

- é€‰æ‹©æ—¶é—´èŒƒå›´åï¼Œç‚¹å‡»"æœç´¢"æŒ‰é’®
- ç³»ç»Ÿä¼šè‡ªåŠ¨è¿‡æ»¤å‡ºè¯¥æ—¶é—´èŒƒå›´å†…çš„æ—¥å¿—è®°å½•
- å¯ä»¥ä¸å…¶ä»–ç­›é€‰æ¡ä»¶ç»„åˆä½¿ç”¨

### 3. æ¸…ç©ºæ—¶é—´èŒƒå›´

- ç‚¹å‡»æ—¶é—´èŒƒå›´è¾“å…¥æ¡†å³ä¾§çš„æ¸…ç©ºæŒ‰é’®ï¼ˆÃ—ï¼‰
- æˆ–è€…é‡æ–°é€‰æ‹©æ—¶é—´èŒƒå›´

---

## ğŸ¨ ç•Œé¢å±•ç¤º

### æœç´¢è¡¨å•å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æœç´¢: [___________________]  æ“ä½œæ—¶é—´: [å¼€å§‹æ—¶é—´ ~ ç»“æŸæ—¶é—´] â”‚
â”‚ æ“ä½œç±»å‹: [è¯·é€‰æ‹©â–¼]  æ“ä½œçŠ¶æ€: [è¯·é€‰æ‹©â–¼]  æ“ä½œç›®æ ‡: [è¯·é€‰æ‹©â–¼] â”‚
â”‚ [æœç´¢] [é‡ç½®]                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ—¶é—´é€‰æ‹©å™¨ç¤ºä¾‹

```
å¼€å§‹æ—¶é—´: 2025-11-01 00:00:00
ç»“æŸæ—¶é—´: 2025-11-17 23:59:59
```

---

## ğŸ’¡ æŠ€æœ¯è¦ç‚¹

### 1. RangePicker ç»„ä»¶é…ç½®

| å±æ€§ | å€¼ | è¯´æ˜ |
|------|-----|------|
| `placeholder` | `['å¼€å§‹æ—¶é—´', 'ç»“æŸæ—¶é—´']` | è¾“å…¥æ¡†å ä½ç¬¦ |
| `showTime` | `true` | æ˜¾ç¤ºæ—¶é—´é€‰æ‹© |
| `format` | `'YYYY-MM-DD HH:mm:ss'` | æ—¶é—´æ ¼å¼ |
| `allowClear` | `true` | å…è®¸æ¸…ç©º |
| `style` | `{ width: '100%' }` | å®½åº¦100% |

### 2. dayjs æ—¶é—´æ¯”è¾ƒ

```typescript
const logTime = dayjs(log.createTime)
const isInRange = logTime.isAfter(dayjs(startTime)) && logTime.isBefore(dayjs(endTime))
```

### 3. æ•°æ®è¿‡æ»¤é¡ºåº

1. æœç´¢å…³é”®è¯è¿‡æ»¤
2. æ“ä½œç±»å‹è¿‡æ»¤
3. æ“ä½œçŠ¶æ€è¿‡æ»¤
4. æ“ä½œç›®æ ‡è¿‡æ»¤
5. **æ“ä½œæ—¶é—´åŒºé—´è¿‡æ»¤** â† æ–°å¢
6. åˆ†é¡µå¤„ç†

---

## ğŸ” ä½¿ç”¨åœºæ™¯

### åœºæ™¯1ï¼šæŸ¥è¯¢ä»Šå¤©çš„æ—¥å¿—

```
å¼€å§‹æ—¶é—´: 2025-11-17 00:00:00
ç»“æŸæ—¶é—´: 2025-11-17 23:59:59
```

### åœºæ™¯2ï¼šæŸ¥è¯¢æœ€è¿‘7å¤©çš„æ—¥å¿—

```
å¼€å§‹æ—¶é—´: 2025-11-10 00:00:00
ç»“æŸæ—¶é—´: 2025-11-17 23:59:59
```

### åœºæ™¯3ï¼šæŸ¥è¯¢ç‰¹å®šæ—¶é—´æ®µçš„æ—¥å¿—

```
å¼€å§‹æ—¶é—´: 2025-11-15 09:00:00
ç»“æŸæ—¶é—´: 2025-11-15 18:00:00
```

### åœºæ™¯4ï¼šç»„åˆæŸ¥è¯¢

```
æ“ä½œæ—¶é—´: 2025-11-17 00:00:00 ~ 2025-11-17 23:59:59
æ“ä½œç±»å‹: ç™»å½•
æ“ä½œçŠ¶æ€: æˆåŠŸ
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ—¶é—´èŒƒå›´éªŒè¯

- å¼€å§‹æ—¶é—´å¿…é¡»æ—©äºç»“æŸæ—¶é—´
- RangePicker ç»„ä»¶ä¼šè‡ªåŠ¨å¤„ç†è¿™ä¸ªéªŒè¯

### 2. æ—¶é—´ç²¾åº¦

- æ”¯æŒç²¾ç¡®åˆ°ç§’çš„æ—¶é—´ç­›é€‰
- æ—¶é—´æ¯”è¾ƒä½¿ç”¨ `isAfter` å’Œ `isBefore`ï¼Œä¸åŒ…å«è¾¹ç•Œå€¼
- å¦‚éœ€åŒ…å«è¾¹ç•Œå€¼ï¼Œå¯ä½¿ç”¨ `isSameOrAfter` å’Œ `isSameOrBefore`

### 3. æ€§èƒ½è€ƒè™‘

- å¯¹äºå¤§é‡æ•°æ®ï¼Œå»ºè®®åœ¨åç«¯è¿›è¡Œæ—¶é—´èŒƒå›´è¿‡æ»¤
- å½“å‰å®ç°ä¸ºå‰ç«¯è¿‡æ»¤ï¼Œé€‚ç”¨äºæ•°æ®é‡è¾ƒå°çš„åœºæ™¯

---

## ğŸš€ åç»­ä¼˜åŒ–å»ºè®®

### 1. å¿«æ·æ—¶é—´é€‰æ‹©

æ·»åŠ å¿«æ·é€‰é¡¹ï¼š
- ä»Šå¤©
- æ˜¨å¤©
- æœ€è¿‘7å¤©
- æœ€è¿‘30å¤©
- æœ¬æœˆ
- ä¸Šæœˆ

```typescript
componentProps: {
  ranges: {
    'ä»Šå¤©': [dayjs().startOf('day'), dayjs().endOf('day')],
    'æ˜¨å¤©': [dayjs().subtract(1, 'day').startOf('day'), dayjs().subtract(1, 'day').endOf('day')],
    'æœ€è¿‘7å¤©': [dayjs().subtract(7, 'day'), dayjs()],
    'æœ€è¿‘30å¤©': [dayjs().subtract(30, 'day'), dayjs()],
    'æœ¬æœˆ': [dayjs().startOf('month'), dayjs().endOf('month')],
    'ä¸Šæœˆ': [dayjs().subtract(1, 'month').startOf('month'), dayjs().subtract(1, 'month').endOf('month')]
  }
}
```

### 2. æ—¶é—´èŒƒå›´é™åˆ¶

é™åˆ¶æœ€å¤§æ—¶é—´è·¨åº¦ï¼ˆå¦‚ï¼šæœ€å¤šæŸ¥è¯¢90å¤©ï¼‰ï¼š

```typescript
componentProps: {
  disabledDate: (current: any) => {
    // ç¦ç”¨æœªæ¥æ—¥æœŸ
    return current && current > dayjs().endOf('day')
  }
}
```

### 3. é»˜è®¤æ—¶é—´èŒƒå›´

è®¾ç½®é»˜è®¤æŸ¥è¯¢æœ€è¿‘7å¤©çš„æ—¥å¿—ï¼š

```typescript
// åœ¨ç»„ä»¶åˆå§‹åŒ–æ—¶è®¾ç½®é»˜è®¤å€¼
const defaultTimeRange = [
  dayjs().subtract(7, 'day').startOf('day'),
  dayjs().endOf('day')
]
```

### 4. åç«¯APIé›†æˆ

åˆ‡æ¢åˆ°çœŸå®APIæ—¶çš„å‚æ•°æ ¼å¼ï¼š

```typescript
query: async ({ page }, formValues) => {
  const params = {
    page: page.currentPage,
    pageSize: page.pageSize,
    startTime: formValues.timeRange?.[0]?.format('YYYY-MM-DD HH:mm:ss'),
    endTime: formValues.timeRange?.[1]?.format('YYYY-MM-DD HH:mm:ss'),
    operationType: formValues.operationType,
    operationStatus: formValues.operationStatus,
    operationTarget: formValues.operationTarget,
    search: formValues.search
  }
  
  const response = await http.get('/api/syslog/list', { params })
  return {
    items: response.data.list,
    count: response.data.total
  }
}
```

---

## âœ… æµ‹è¯•æ¸…å•

- [x] æ—¶é—´èŒƒå›´é€‰æ‹©å™¨æ­£å¸¸æ˜¾ç¤º
- [x] å¯ä»¥é€‰æ‹©å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´
- [x] æ—¶é—´æ ¼å¼æ˜¾ç¤ºæ­£ç¡®ï¼ˆYYYY-MM-DD HH:mm:ssï¼‰
- [x] ç‚¹å‡»æœç´¢åæ­£ç¡®è¿‡æ»¤æ•°æ®
- [x] æ¸…ç©ºæ—¶é—´èŒƒå›´åæ˜¾ç¤ºæ‰€æœ‰æ•°æ®
- [x] ä¸å…¶ä»–ç­›é€‰æ¡ä»¶ç»„åˆä½¿ç”¨æ­£å¸¸
- [x] æ—¶é—´æ¯”è¾ƒé€»è¾‘æ­£ç¡®
- [x] åˆ†é¡µåŠŸèƒ½æ­£å¸¸

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ç³»ç»Ÿæ—¥å¿—åŠŸèƒ½å®ç°æ–‡æ¡£.md](./ç³»ç»Ÿæ—¥å¿—åŠŸèƒ½å®ç°æ–‡æ¡£.md)
- [ç³»ç»Ÿæ—¥å¿—åŠŸèƒ½-å¿«é€Ÿå¼€å§‹.md](./ç³»ç»Ÿæ—¥å¿—åŠŸèƒ½-å¿«é€Ÿå¼€å§‹.md)
- [ç³»ç»Ÿæ—¥å¿—åŠŸèƒ½-ä¼˜åŒ–è®°å½•.md](./ç³»ç»Ÿæ—¥å¿—åŠŸèƒ½-ä¼˜åŒ–è®°å½•.md)
- [Ant Design Vue - DatePicker](https://antdv.com/components/date-picker-cn)
- [dayjs æ–‡æ¡£](https://dayjs.gitee.io/zh-CN/)

---

## ğŸ“Š ä»£ç å˜æ›´ç»Ÿè®¡

| æ–‡ä»¶ | å˜æ›´ç±»å‹ | è¡Œæ•° |
|------|---------|------|
| `SysLogView.vue` | æ–°å¢æœç´¢å­—æ®µ | +11 |
| `SysLogView.vue` | æ–°å¢è¿‡æ»¤é€»è¾‘ | +8 |
| **æ€»è®¡** | - | **+19** |

---

**åŠŸèƒ½çŠ¶æ€**ï¼šâœ… å·²å®Œæˆ  
**æµ‹è¯•çŠ¶æ€**ï¼šâœ… å·²æµ‹è¯•  
**æ–‡æ¡£çŠ¶æ€**ï¼šâœ… å·²å®Œå–„  

---

**å®ç°æ—¶é—´**ï¼š2025-11-17  
**å¼€å‘è€…**ï¼šAI å¼€å‘å›¢é˜Ÿ  
**ç‰ˆæœ¬**ï¼šv1.2.0
