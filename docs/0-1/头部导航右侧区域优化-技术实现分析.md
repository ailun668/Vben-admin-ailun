# å¤´éƒ¨å¯¼èˆªå³ä¾§åŒºåŸŸä¼˜åŒ– - æŠ€æœ¯å®ç°åˆ†æ

> æœ¬æ–‡æ¡£ä»å¼€å‘å·¥ç¨‹å¸ˆè§’åº¦åˆ†æå¤´éƒ¨å¯¼èˆªå³ä¾§åŒºåŸŸä¼˜åŒ–è®¾è®¡æ–¹æ¡ˆçš„æŠ€æœ¯å¯è¡Œæ€§ã€å®ç°éš¾åº¦ã€é£é™©è¯„ä¼°å’Œå¼€å‘è®¡åˆ’ã€‚

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-01-15  
**åˆ†æè€…**: å¼€å‘å·¥ç¨‹å¸ˆ Agent  
**é€‚ç”¨é¡¹ç›®**: My enterprise

---

## ğŸ“‹ ç›®å½•

- [æŠ€æœ¯å¯è¡Œæ€§åˆ†æ](#æŠ€æœ¯å¯è¡Œæ€§åˆ†æ)
- [å®ç°éš¾åº¦è¯„ä¼°](#å®ç°éš¾åº¦è¯„ä¼°)
- [æŠ€æœ¯æ¶æ„è®¾è®¡](#æŠ€æœ¯æ¶æ„è®¾è®¡)
- [ä¾èµ–é¡¹æ£€æŸ¥](#ä¾èµ–é¡¹æ£€æŸ¥)
- [æ½œåœ¨é£é™©ä¸è§£å†³æ–¹æ¡ˆ](#æ½œåœ¨é£é™©ä¸è§£å†³æ–¹æ¡ˆ)
- [å¼€å‘è®¡åˆ’å»ºè®®](#å¼€å‘è®¡åˆ’å»ºè®®)
- [ä»£ç å®ç°è¦ç‚¹](#ä»£ç å®ç°è¦ç‚¹)
- [æµ‹è¯•ç­–ç•¥](#æµ‹è¯•ç­–ç•¥)

---

## æŠ€æœ¯å¯è¡Œæ€§åˆ†æ

### âœ… æŠ€æœ¯æ ˆå…¼å®¹æ€§

#### ç°æœ‰æŠ€æœ¯æ ˆ
- âœ… **Vue 3.5+** - å®Œå…¨æ”¯æŒ Composition API å’Œ `<script setup>`
- âœ… **TypeScript 5.9+** - ç±»å‹ç³»ç»Ÿå®Œå–„ï¼Œæ”¯æŒä¸¥æ ¼æ¨¡å¼
- âœ… **Ant Design Vue 4.2+** - æä¾›æ‰€éœ€çš„æ‰€æœ‰ç»„ä»¶ï¼ˆDropdownã€Badgeã€Avatarã€Button ç­‰ï¼‰
- âœ… **Pinia 3.0+** - çŠ¶æ€ç®¡ç†å®Œå–„ï¼Œå·²æœ‰ `useAppStore` å’Œ `useUserStore`
- âœ… **Vue Router 4.6+** - è·¯ç”±ç³»ç»Ÿå®Œå–„ï¼Œæ”¯æŒåŠ¨æ€è·¯ç”±

#### æ‰€éœ€ç»„ä»¶å¯ç”¨æ€§

| ç»„ä»¶ | Ant Design Vue æ”¯æŒ | çŠ¶æ€ |
|------|-------------------|------|
| `a-dropdown` | âœ… å®Œå…¨æ”¯æŒ | å¯ç”¨ |
| `a-badge` | âœ… å®Œå…¨æ”¯æŒ | å¯ç”¨ |
| `a-avatar` | âœ… å®Œå…¨æ”¯æŒ | å¯ç”¨ |
| `a-button` | âœ… å®Œå…¨æ”¯æŒ | å¯ç”¨ |
| `a-menu` | âœ… å®Œå…¨æ”¯æŒ | å¯ç”¨ |
| `a-empty` | âœ… å®Œå…¨æ”¯æŒ | å¯ç”¨ |
| `a-divider` | âœ… å®Œå…¨æ”¯æŒ | å¯ç”¨ |
| `a-modal` | âœ… å®Œå…¨æ”¯æŒ | å¯ç”¨ |

#### æ‰€éœ€å›¾æ ‡å¯ç”¨æ€§

| å›¾æ ‡ | @ant-design/icons-vue æ”¯æŒ | çŠ¶æ€ |
|------|--------------------------|------|
| `BellOutlined` | âœ… | å¯ç”¨ |
| `FullscreenOutlined` | âœ… | å¯ç”¨ |
| `FullscreenExitOutlined` | âœ… | å¯ç”¨ |
| `SunOutlined` | âœ… | å¯ç”¨ |
| `MoonOutlined` | âœ… | å¯ç”¨ |
| `UserOutlined` | âœ… | å¯ç”¨ |
| `SettingOutlined` | âœ… | å¯ç”¨ |
| `LogoutOutlined` | âœ… | å¯ç”¨ |
| `DownOutlined` | âœ… | å¯ç”¨ |

### âœ… ç°æœ‰åŸºç¡€è®¾æ–½

#### 1. çŠ¶æ€ç®¡ç†
```typescript
// âœ… å·²æœ‰ useAppStore - æ”¯æŒä¸»é¢˜åˆ‡æ¢
useAppStore().theme        // 'light' | 'dark'
useAppStore().setTheme()   // è®¾ç½®ä¸»é¢˜æ–¹æ³•

// âœ… å·²æœ‰ useUserStore - æ”¯æŒç”¨æˆ·ä¿¡æ¯
useUserStore().userInfo    // ç”¨æˆ·ä¿¡æ¯å¯¹è±¡
useUserStore().userName    // ç”¨æˆ·åè®¡ç®—å±æ€§
useUserStore().logout()    // ç™»å‡ºæ–¹æ³•
```

#### 2. è·¯ç”±ç³»ç»Ÿ
```typescript
// âœ… å·²æœ‰è·¯ç”±é…ç½®
router.push('/profile')    // ä¸ªäººä¸­å¿ƒè·¯ç”±ï¼ˆéœ€åˆ›å»ºï¼‰
router.push('/settings')   // è®¾ç½®è·¯ç”±ï¼ˆå·²å­˜åœ¨ï¼‰
```

#### 3. ç»„ä»¶ç»“æ„
```
src/
â”œâ”€â”€ components/           # âœ… ç»„ä»¶ç›®å½•å·²å­˜åœ¨
â”œâ”€â”€ store/modules/        # âœ… Store æ¨¡å—å·²å­˜åœ¨
â””â”€â”€ App.vue              # âœ… ä¸»å¸ƒå±€æ–‡ä»¶ï¼Œå¯ç›´æ¥ä¿®æ”¹
```

### âš ï¸ éœ€è¦è¡¥å……çš„å†…å®¹

1. **è·¯ç”±é¡µé¢**
   - âŒ `/profile` è·¯ç”±é¡µé¢ï¼ˆä¸ªäººä¸­å¿ƒï¼‰- éœ€è¦åˆ›å»º
   - âœ… `/settings` è·¯ç”±é¡µé¢ï¼ˆè®¾ç½®ï¼‰- å·²å­˜åœ¨

2. **API æ¥å£**
   - âŒ é€šçŸ¥ç›¸å…³ APIï¼ˆè·å–é€šçŸ¥åˆ—è¡¨ã€æ ‡è®°å·²è¯»ç­‰ï¼‰
   - âœ… ç”¨æˆ·ç›¸å…³ APIï¼ˆå·²å­˜åœ¨ï¼‰

3. **ç±»å‹å®šä¹‰**
   - âŒ `NotificationItem` ç±»å‹å®šä¹‰
   - âœ… `UserInfo` ç±»å‹å®šä¹‰ï¼ˆå·²å­˜åœ¨ï¼‰

---

## å®ç°éš¾åº¦è¯„ä¼°

### ç»„ä»¶å®ç°éš¾åº¦åˆ†æ

| ç»„ä»¶ | å®ç°éš¾åº¦ | é¢„è®¡å·¥æ—¶ | æŠ€æœ¯éš¾ç‚¹ | é£é™©è¯„ä¼° |
|------|---------|---------|---------|---------|
| **UserMenu** | â­ ç®€å• | 2 å°æ—¶ | æ—  | ğŸŸ¢ ä½é£é™© |
| **ThemeToggle** | â­ ç®€å• | 1 å°æ—¶ | ä¸»é¢˜åˆ‡æ¢é€»è¾‘ | ğŸŸ¢ ä½é£é™© |
| **FullscreenToggle** | â­ ç®€å• | 1 å°æ—¶ | å…¨å± API å…¼å®¹æ€§ | ğŸŸ¡ ä¸­é£é™© |
| **NotificationCenter** | â­â­â­ ä¸­ç­‰ | 4 å°æ—¶ | æ•°æ®ç®¡ç†ã€å®æ—¶æ›´æ–° | ğŸŸ¡ ä¸­é£é™© |
| **GlobalSearch** | â­â­â­â­ å¤æ‚ | 8 å°æ—¶ | æœç´¢ç®—æ³•ã€æ€§èƒ½ä¼˜åŒ– | ğŸ”´ é«˜é£é™© |
| **HeaderRight** | â­â­ ç®€å• | 1 å°æ—¶ | ç»„ä»¶é›†æˆ | ğŸŸ¢ ä½é£é™© |

### è¯¦ç»†éš¾åº¦åˆ†æ

#### 1. UserMenu ç»„ä»¶ â­

**å®ç°è¦ç‚¹**ï¼š
- ä½¿ç”¨ `a-dropdown` + `a-menu` ç»„åˆ
- å¤ç”¨ç°æœ‰çš„ `useUserStore` å’Œç™»å‡ºé€»è¾‘
- ç®€å•çš„æ ·å¼å®šåˆ¶

**æŠ€æœ¯éš¾ç‚¹**ï¼šæ— 

**ä»£ç é‡ä¼°ç®—**ï¼š~100 è¡Œ

#### 2. ThemeToggle ç»„ä»¶ â­

**å®ç°è¦ç‚¹**ï¼š
- ä½¿ç”¨ç°æœ‰çš„ `useAppStore().setTheme()`
- å›¾æ ‡åˆ‡æ¢é€»è¾‘
- ä¸»é¢˜æŒä¹…åŒ–ï¼ˆå·²æœ‰ï¼‰

**æŠ€æœ¯éš¾ç‚¹**ï¼š
- éœ€è¦ç¡®ä¿ä¸»é¢˜åˆ‡æ¢å UI æ­£ç¡®æ›´æ–°
- å¯èƒ½éœ€è¦æ›´æ–° CSS å˜é‡

**ä»£ç é‡ä¼°ç®—**ï¼š~50 è¡Œ

#### 3. FullscreenToggle ç»„ä»¶ â­

**å®ç°è¦ç‚¹**ï¼š
- ä½¿ç”¨æµè§ˆå™¨ Fullscreen API
- ç›‘å¬å…¨å±çŠ¶æ€å˜åŒ–
- å¤„ç†æµè§ˆå™¨å…¼å®¹æ€§

**æŠ€æœ¯éš¾ç‚¹**ï¼š
- ä¸åŒæµè§ˆå™¨çš„ Fullscreen API å‰ç¼€ï¼ˆwebkitã€mozã€msï¼‰
- éœ€è¦å¤„ç†æƒé™æ‹’ç»çš„æƒ…å†µ

**ä»£ç é‡ä¼°ç®—**ï¼š~80 è¡Œ

**å…¼å®¹æ€§å¤„ç†**ï¼š
```typescript
// éœ€è¦å¤„ç†ä¸åŒæµè§ˆå™¨çš„ API
const requestFullscreen = element.requestFullscreen 
  || element.webkitRequestFullscreen 
  || element.mozRequestFullScreen 
  || element.msRequestFullscreen
```

#### 4. NotificationCenter ç»„ä»¶ â­â­â­

**å®ç°è¦ç‚¹**ï¼š
- é€šçŸ¥åˆ—è¡¨æ•°æ®ç®¡ç†
- æœªè¯»æ•°é‡è®¡ç®—
- ä¸‹æ‹‰èœå•äº¤äº’
- æ—¶é—´æ ¼å¼åŒ–
- é€šçŸ¥ç‚¹å‡»å¤„ç†

**æŠ€æœ¯éš¾ç‚¹**ï¼š
- å®æ—¶é€šçŸ¥æ›´æ–°ï¼ˆå¯èƒ½éœ€è¦ WebSocket æˆ–è½®è¯¢ï¼‰
- å¤§é‡é€šçŸ¥çš„æ€§èƒ½ä¼˜åŒ–ï¼ˆè™šæ‹Ÿæ»šåŠ¨ï¼‰
- é€šçŸ¥åˆ†ç±»å’Œç­›é€‰

**ä»£ç é‡ä¼°ç®—**ï¼š~300 è¡Œ

**æ€§èƒ½ä¼˜åŒ–å»ºè®®**ï¼š
- ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¦‚æœé€šçŸ¥æ•°é‡ > 100ï¼‰
- åˆ†é¡µåŠ è½½é€šçŸ¥
- é˜²æŠ–å¤„ç†é€šçŸ¥æ›´æ–°

#### 5. GlobalSearch ç»„ä»¶ â­â­â­â­

**å®ç°è¦ç‚¹**ï¼š
- å…¨å±€æœç´¢å…¥å£ï¼ˆå¿«æ·é”®æ”¯æŒï¼‰
- æœç´¢ç®—æ³•ï¼ˆæ¨¡ç³ŠåŒ¹é…ã€é«˜äº®ï¼‰
- æœç´¢ç»“æœå±•ç¤º
- æœç´¢å†å²è®°å½•

**æŠ€æœ¯éš¾ç‚¹**ï¼š
- æœç´¢æ€§èƒ½ä¼˜åŒ–ï¼ˆå¤§é‡æ•°æ®ï¼‰
- æœç´¢ç®—æ³•è®¾è®¡ï¼ˆæ¨¡ç³ŠåŒ¹é…ã€æƒé‡æ’åºï¼‰
- å¿«æ·é”®å†²çªå¤„ç†
- æœç´¢ç»“æœé«˜äº®

**ä»£ç é‡ä¼°ç®—**ï¼š~500 è¡Œ

**å»ºè®®**ï¼šç¬¬ä¸€é˜¶æ®µå¯ä»¥ç®€åŒ–å®ç°ï¼Œåç»­ä¼˜åŒ–

---

## æŠ€æœ¯æ¶æ„è®¾è®¡

### ç»„ä»¶ç›®å½•ç»“æ„

```
src/components/HeaderRight/
â”œâ”€â”€ index.ts                    # å¯¼å‡ºæ–‡ä»¶
â”œâ”€â”€ HeaderRight.vue            # ä¸»ç»„ä»¶
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ NotificationCenter.vue # é€šçŸ¥ä¸­å¿ƒç»„ä»¶
â”‚   â”œâ”€â”€ ThemeToggle.vue        # ä¸»é¢˜åˆ‡æ¢ç»„ä»¶
â”‚   â”œâ”€â”€ FullscreenToggle.vue   # å…¨å±åˆ‡æ¢ç»„ä»¶
â”‚   â”œâ”€â”€ UserMenu.vue           # ç”¨æˆ·èœå•ç»„ä»¶
â”‚   â””â”€â”€ GlobalSearch.vue       # å…¨å±€æœç´¢ç»„ä»¶ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ types.ts                    # ç±»å‹å®šä¹‰
â””â”€â”€ utils.ts                    # å·¥å…·å‡½æ•°ï¼ˆå¦‚æ—¶é—´æ ¼å¼åŒ–ï¼‰
```

### æ•°æ®æµè®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              HeaderRight.vue                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ThemeToggleâ”‚  â”‚Fullscreenâ”‚  â”‚UserMenu  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â”‚
â”‚       â”‚             â”‚             â”‚            â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                    â”‚                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            â”‚            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚ useAppStoreâ”‚ â”‚useUserStoreâ”‚ â”‚Notificationâ”‚
â”‚            â”‚ â”‚            â”‚ â”‚   Store    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### çŠ¶æ€ç®¡ç†è®¾è®¡

#### é€šçŸ¥çŠ¶æ€ç®¡ç†ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦æ›´å¤æ‚çš„é€šçŸ¥ç®¡ç†ï¼Œå¯ä»¥åˆ›å»ºç‹¬ç«‹çš„ Storeï¼š

```typescript
// src/store/modules/notification.ts
export const useNotificationStore = defineStore('notification', () => {
  const notifications = ref<NotificationItem[]>([])
  const unreadCount = computed(() => 
    notifications.value.filter(n => !n.read).length
  )
  
  // è·å–é€šçŸ¥åˆ—è¡¨
  async function fetchNotifications() { }
  
  // æ ‡è®°å·²è¯»
  async function markAsRead(id: string) { }
  
  // æ ‡è®°å…¨éƒ¨å·²è¯»
  async function markAllAsRead() { }
  
  return {
    notifications,
    unreadCount,
    fetchNotifications,
    markAsRead,
    markAllAsRead
  }
})
```

**å»ºè®®**ï¼šç¬¬ä¸€é˜¶æ®µå¯ä»¥å…ˆç”¨ç»„ä»¶å†…éƒ¨çŠ¶æ€ï¼Œåç»­å†æå–åˆ° Store

---

## ä¾èµ–é¡¹æ£€æŸ¥

### å¿…éœ€ä¾èµ–ï¼ˆå·²å®‰è£…ï¼‰

```json
{
  "vue": "^3.5.0",                    // âœ… å·²å®‰è£…
  "ant-design-vue": "^4.2.0",        // âœ… å·²å®‰è£…
  "@ant-design/icons-vue": "^4.x",   // âœ… å·²å®‰è£…ï¼ˆéœ€ç¡®è®¤ï¼‰
  "pinia": "^3.0.0",                 // âœ… å·²å®‰è£…
  "vue-router": "^4.6.0"             // âœ… å·²å®‰è£…
}
```

### å¯é€‰ä¾èµ–ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰

```json
{
  "dayjs": "^1.11.0",                // æ—¶é—´æ ¼å¼åŒ–ï¼ˆæ¨èï¼‰
  "lodash-es": "^4.17.21"            // å·¥å…·å‡½æ•°ï¼ˆå¯é€‰ï¼‰
}
```

### éœ€è¦ç¡®è®¤çš„ä¾èµ–

1. **@ant-design/icons-vue** - éœ€è¦ç¡®è®¤ç‰ˆæœ¬å’Œæ˜¯å¦å·²å®‰è£…
2. **dayjs** - ç”¨äºæ—¶é—´æ ¼å¼åŒ–ï¼Œå»ºè®®å®‰è£…

---

## æ½œåœ¨é£é™©ä¸è§£å†³æ–¹æ¡ˆ

### ğŸ”´ é«˜é£é™©é¡¹

#### 1. å…¨å± API æµè§ˆå™¨å…¼å®¹æ€§

**é£é™©**ï¼šä¸åŒæµè§ˆå™¨å¯¹ Fullscreen API çš„æ”¯æŒä¸åŒ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```typescript
// å°è£…å…¨å± APIï¼Œå¤„ç†å…¼å®¹æ€§
function requestFullscreen(element: HTMLElement) {
  if (element.requestFullscreen) {
    return element.requestFullscreen()
  } else if ((element as any).webkitRequestFullscreen) {
    return (element as any).webkitRequestFullscreen()
  } else if ((element as any).mozRequestFullScreen) {
    return (element as any).mozRequestFullScreen()
  } else if ((element as any).msRequestFullscreen) {
    return (element as any).msRequestFullscreen()
  }
  return Promise.reject(new Error('Fullscreen API not supported'))
}
```

#### 2. é€šçŸ¥ä¸­å¿ƒæ€§èƒ½é—®é¢˜

**é£é™©**ï¼šå¤§é‡é€šçŸ¥å¯¼è‡´æ¸²æŸ“æ€§èƒ½ä¸‹é™

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¦‚ `vue-virtual-scroller`ï¼‰
- åˆ†é¡µåŠ è½½é€šçŸ¥
- é™åˆ¶æ˜¾ç¤ºæ•°é‡ï¼ˆå¦‚æœ€å¤šæ˜¾ç¤º 50 æ¡ï¼‰

#### 3. å…¨å±€æœç´¢æ€§èƒ½é—®é¢˜

**é£é™©**ï¼šæœç´¢å¤§é‡æ•°æ®æ—¶å¡é¡¿

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨ Web Worker è¿›è¡Œæœç´¢è®¡ç®—
- å®ç°æœç´¢é˜²æŠ–ï¼ˆ300msï¼‰
- é™åˆ¶æœç´¢ç»“æœæ•°é‡
- ä½¿ç”¨ç´¢å¼•ä¼˜åŒ–æœç´¢

### ğŸŸ¡ ä¸­é£é™©é¡¹

#### 1. ä¸»é¢˜åˆ‡æ¢åæ ·å¼ä¸ä¸€è‡´

**é£é™©**ï¼šåˆ‡æ¢ä¸»é¢˜åéƒ¨åˆ†ç»„ä»¶æ ·å¼æœªæ›´æ–°

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨ CSS å˜é‡ç»Ÿä¸€ç®¡ç†ä¸»é¢˜è‰²
- ç¡®ä¿æ‰€æœ‰ç»„ä»¶æ”¯æŒä¸»é¢˜åˆ‡æ¢
- æµ‹è¯•æ‰€æœ‰é¡µé¢çš„ä¸»é¢˜åˆ‡æ¢æ•ˆæœ

#### 2. é€šçŸ¥å®æ—¶æ›´æ–°

**é£é™©**ï¼šé€šçŸ¥æ— æ³•å®æ—¶æ›´æ–°

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨ WebSocket å®æ—¶æ¨é€ï¼ˆæ¨èï¼‰
- æˆ–ä½¿ç”¨è½®è¯¢æœºåˆ¶ï¼ˆæ¯ 30 ç§’åˆ·æ–°ï¼‰
- æä¾›æ‰‹åŠ¨åˆ·æ–°æŒ‰é’®

#### 3. ç§»åŠ¨ç«¯é€‚é…

**é£é™©**ï¼šç§»åŠ¨ç«¯æ˜¾ç¤ºæ•ˆæœä¸ä½³

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨å“åº”å¼è®¾è®¡
- ç§»åŠ¨ç«¯éšè—æ¬¡è¦åŠŸèƒ½
- ä¼˜åŒ–è§¦æ‘¸äº¤äº’

### ğŸŸ¢ ä½é£é™©é¡¹

#### 1. ç”¨æˆ·èœå•è·¯ç”±ä¸å­˜åœ¨

**é£é™©**ï¼šç‚¹å‡»"ä¸ªäººä¸­å¿ƒ"è·³è½¬åˆ°ä¸å­˜åœ¨çš„é¡µé¢

**è§£å†³æ–¹æ¡ˆ**ï¼š
- åˆ›å»º `/profile` è·¯ç”±å’Œé¡µé¢
- æˆ–æš‚æ—¶ç¦ç”¨è¯¥èœå•é¡¹ï¼Œæ˜¾ç¤º"å¼€å‘ä¸­"æç¤º

#### 2. ç±»å‹å®šä¹‰ç¼ºå¤±

**é£é™©**ï¼šTypeScript ç±»å‹é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
- åˆ›å»ºå®Œæ•´çš„ç±»å‹å®šä¹‰æ–‡ä»¶
- ä½¿ç”¨ä¸¥æ ¼çš„ TypeScript é…ç½®

---

## å¼€å‘è®¡åˆ’å»ºè®®

### é˜¶æ®µä¸€ï¼šMVP ç‰ˆæœ¬ï¼ˆæ¨èï¼‰ğŸ”¥

**ç›®æ ‡**ï¼šå®ç°æ ¸å¿ƒåŠŸèƒ½ï¼Œå¿«é€Ÿä¸Šçº¿

**åŒ…å«åŠŸèƒ½**ï¼š
1. âœ… UserMenu ç»„ä»¶ï¼ˆç”¨æˆ·èœå•ï¼‰
2. âœ… ThemeToggle ç»„ä»¶ï¼ˆä¸»é¢˜åˆ‡æ¢ï¼‰
3. âœ… HeaderRight ä¸»ç»„ä»¶ï¼ˆé›†æˆï¼‰

**é¢„è®¡å·¥æ—¶**ï¼š4 å°æ—¶

**äº¤ä»˜ç‰©**ï¼š
- å¯ç”¨çš„å¤´éƒ¨å³ä¾§ç»„ä»¶
- ç”¨æˆ·èœå•åŠŸèƒ½
- ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½

### é˜¶æ®µäºŒï¼šå¢å¼ºåŠŸèƒ½ ğŸ“‹

**ç›®æ ‡**ï¼šæ·»åŠ å®ç”¨åŠŸèƒ½

**åŒ…å«åŠŸèƒ½**ï¼š
1. âœ… FullscreenToggle ç»„ä»¶ï¼ˆå…¨å±åˆ‡æ¢ï¼‰
2. âœ… NotificationCenter ç»„ä»¶ï¼ˆé€šçŸ¥ä¸­å¿ƒ - ç®€åŒ–ç‰ˆï¼‰

**é¢„è®¡å·¥æ—¶**ï¼š6 å°æ—¶

**äº¤ä»˜ç‰©**ï¼š
- å…¨å±åˆ‡æ¢åŠŸèƒ½
- åŸºç¡€é€šçŸ¥ä¸­å¿ƒï¼ˆé™æ€æ•°æ®æˆ– Mock æ•°æ®ï¼‰

### é˜¶æ®µä¸‰ï¼šé«˜çº§åŠŸèƒ½ ğŸ’¡

**ç›®æ ‡**ï¼šå®Œå–„ç”¨æˆ·ä½“éªŒ

**åŒ…å«åŠŸèƒ½**ï¼š
1. âœ… NotificationCenter å®Œæ•´ç‰ˆï¼ˆAPI é›†æˆã€å®æ—¶æ›´æ–°ï¼‰
2. âœ… GlobalSearch ç»„ä»¶ï¼ˆå…¨å±€æœç´¢ï¼‰

**é¢„è®¡å·¥æ—¶**ï¼š12 å°æ—¶

**äº¤ä»˜ç‰©**ï¼š
- å®Œæ•´çš„é€šçŸ¥ä¸­å¿ƒï¼ˆæ”¯æŒå®æ—¶æ›´æ–°ï¼‰
- å…¨å±€æœç´¢åŠŸèƒ½

---

## ä»£ç å®ç°è¦ç‚¹

### 1. ç»„ä»¶é€šä¿¡

#### Props ä¼ é€’
```typescript
// HeaderRight.vue
interface Props {
  /** æ˜¯å¦æ˜¾ç¤ºæœç´¢åŠŸèƒ½ */
  showSearch?: boolean
}

const props = withDefaults(defineProps<Props>(), {
  showSearch: false
})
```

#### äº‹ä»¶ä¼ é€’
```typescript
// HeaderRight.vue
interface Emits {
  (e: 'theme-change', theme: 'light' | 'dark'): void
  (e: 'logout'): void
}

const emit = defineEmits<Emits>()
```

### 2. ç±»å‹å®šä¹‰

```typescript
// src/components/HeaderRight/types.ts

/**
 * é€šçŸ¥é¡¹
 */
export interface NotificationItem {
  /** é€šçŸ¥ ID */
  id: string
  /** é€šçŸ¥ç±»å‹ */
  type: 'success' | 'info' | 'warning' | 'error'
  /** é€šçŸ¥æ ‡é¢˜ */
  title: string
  /** é€šçŸ¥æè¿° */
  description: string
  /** é€šçŸ¥æ—¶é—´ */
  time: Date | string
  /** æ˜¯å¦å·²è¯» */
  read: boolean
  /** è·³è½¬é“¾æ¥ï¼ˆå¯é€‰ï¼‰ */
  link?: string
  /** è‡ªå®šä¹‰æ“ä½œï¼ˆå¯é€‰ï¼‰ */
  action?: () => void
}

/**
 * ç”¨æˆ·èœå•é¡¹
 */
export interface UserMenuItem {
  /** èœå•é¡¹ key */
  key: string
  /** èœå•é¡¹æ ‡ç­¾ */
  label: string
  /** èœå•é¡¹å›¾æ ‡ */
  icon?: Component
  /** æ˜¯å¦å±é™©æ“ä½œ */
  danger?: boolean
  /** æ˜¯å¦ç¦ç”¨ */
  disabled?: boolean
}
```

### 3. å·¥å…·å‡½æ•°

```typescript
// src/components/HeaderRight/utils.ts
import dayjs from 'dayjs'
import relativeTime from 'dayjs/plugin/relativeTime'
import 'dayjs/locale/zh-cn'

dayjs.extend(relativeTime)
dayjs.locale('zh-cn')

/**
 * æ ¼å¼åŒ–é€šçŸ¥æ—¶é—´
 * @param time æ—¶é—´
 * @returns æ ¼å¼åŒ–åçš„æ—¶é—´å­—ç¬¦ä¸²
 */
export function formatNotificationTime(time: Date | string): string {
  const now = dayjs()
  const target = dayjs(time)
  const diff = now.diff(target, 'minute')

  if (diff < 1) {
    return 'åˆšåˆš'
  } else if (diff < 60) {
    return `${diff}åˆ†é’Ÿå‰`
  } else if (diff < 1440) {
    return `${Math.floor(diff / 60)}å°æ—¶å‰`
  } else if (diff < 10080) {
    return `${Math.floor(diff / 1440)}å¤©å‰`
  } else {
    return target.format('YYYY-MM-DD HH:mm')
  }
}

/**
 * å…¨å± API å…¼å®¹æ€§å°è£…
 */
export const fullscreenAPI = {
  /**
   * è¯·æ±‚å…¨å±
   */
  request(element: HTMLElement = document.documentElement): Promise<void> {
    if (element.requestFullscreen) {
      return element.requestFullscreen()
    } else if ((element as any).webkitRequestFullscreen) {
      return (element as any).webkitRequestFullscreen()
    } else if ((element as any).mozRequestFullScreen) {
      return (element as any).mozRequestFullScreen()
    } else if ((element as any).msRequestFullscreen) {
      return (element as any).msRequestFullscreen()
    }
    return Promise.reject(new Error('Fullscreen API not supported'))
  },

  /**
   * é€€å‡ºå…¨å±
   */
  exit(): Promise<void> {
    if (document.exitFullscreen) {
      return document.exitFullscreen()
    } else if ((document as any).webkitExitFullscreen) {
      return (document as any).webkitExitFullscreen()
    } else if ((document as any).mozCancelFullScreen) {
      return (document as any).mozCancelFullScreen()
    } else if ((document as any).msExitFullscreen) {
      return (document as any).msExitFullscreen()
    }
    return Promise.reject(new Error('Fullscreen API not supported'))
  },

  /**
   * æ£€æŸ¥æ˜¯å¦å…¨å±
   */
  isFullscreen(): boolean {
    return !!(
      document.fullscreenElement ||
      (document as any).webkitFullscreenElement ||
      (document as any).mozFullScreenElement ||
      (document as any).msFullscreenElement
    )
  }
}
```

### 4. æ ·å¼è§„èŒƒ

```vue
<style scoped lang="less">
// ä½¿ç”¨ Less å˜é‡ï¼ˆå¦‚æœé¡¹ç›®æ”¯æŒï¼‰
@header-height: 64px;
@header-padding: 24px;
@action-btn-size: 32px;
@action-btn-gap: 12px;

.header-right {
  display: flex;
  align-items: center;
  gap: @action-btn-gap;
  height: 100%;
}

.header-action-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: @action-btn-size;
  height: @action-btn-size;
  padding: 0;
  color: rgba(0, 0, 0, 0.65);
  border-radius: 4px;
  transition: all 0.2s;
  cursor: pointer;

  &:hover {
    color: rgba(0, 0, 0, 0.85);
    background: rgba(0, 0, 0, 0.06);
  }

  &:active {
    transform: scale(0.95);
  }
}
</style>
```

---

## æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•

#### 1. ThemeToggle ç»„ä»¶æµ‹è¯•
```typescript
describe('ThemeToggle', () => {
  it('åº”è¯¥æ­£ç¡®åˆ‡æ¢ä¸»é¢˜', async () => {
    const wrapper = mount(ThemeToggle)
    const appStore = useAppStore()
    
    expect(appStore.theme).toBe('light')
    
    await wrapper.find('button').trigger('click')
    
    expect(appStore.theme).toBe('dark')
  })
})
```

#### 2. FullscreenToggle ç»„ä»¶æµ‹è¯•
```typescript
describe('FullscreenToggle', () => {
  it('åº”è¯¥æ­£ç¡®åˆ‡æ¢å…¨å±çŠ¶æ€', async () => {
    const wrapper = mount(FullscreenToggle)
    
    // Mock Fullscreen API
    const mockRequestFullscreen = vi.fn()
    document.documentElement.requestFullscreen = mockRequestFullscreen
    
    await wrapper.find('button').trigger('click')
    
    expect(mockRequestFullscreen).toHaveBeenCalled()
  })
})
```

#### 3. UserMenu ç»„ä»¶æµ‹è¯•
```typescript
describe('UserMenu', () => {
  it('åº”è¯¥æ­£ç¡®æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯', () => {
    const userStore = useUserStore()
    userStore.userInfo = { username: 'test', realName: 'æµ‹è¯•ç”¨æˆ·' }
    
    const wrapper = mount(UserMenu)
    
    expect(wrapper.text()).toContain('æµ‹è¯•ç”¨æˆ·')
  })
  
  it('åº”è¯¥æ­£ç¡®å¤„ç†ç™»å‡º', async () => {
    const wrapper = mount(UserMenu)
    const userStore = useUserStore()
    const logoutSpy = vi.spyOn(userStore, 'logout')
    
    // æ‰“å¼€èœå•
    await wrapper.find('.user-menu-trigger').trigger('click')
    // ç‚¹å‡»ç™»å‡º
    await wrapper.find('[key="logout"]').trigger('click')
    // ç¡®è®¤
    await wrapper.find('.ant-modal-confirm-ok').trigger('click')
    
    expect(logoutSpy).toHaveBeenCalled()
  })
})
```

### é›†æˆæµ‹è¯•

#### 1. HeaderRight ç»„ä»¶é›†æˆæµ‹è¯•
```typescript
describe('HeaderRight Integration', () => {
  it('åº”è¯¥æ­£ç¡®æ¸²æŸ“æ‰€æœ‰å­ç»„ä»¶', () => {
    const wrapper = mount(HeaderRight)
    
    expect(wrapper.findComponent(ThemeToggle).exists()).toBe(true)
    expect(wrapper.findComponent(UserMenu).exists()).toBe(true)
  })
})
```

### E2E æµ‹è¯•

#### 1. ç”¨æˆ·æµç¨‹æµ‹è¯•
```typescript
describe('HeaderRight E2E', () => {
  it('åº”è¯¥å®Œæˆå®Œæ•´çš„ç”¨æˆ·æ“ä½œæµç¨‹', async () => {
    // 1. æ‰“å¼€ç”¨æˆ·èœå•
    await page.click('.user-menu-trigger')
    
    // 2. ç‚¹å‡»ä¸ªäººä¸­å¿ƒ
    await page.click('[key="profile"]')
    
    // 3. éªŒè¯è·¯ç”±è·³è½¬
    expect(page.url()).toContain('/profile')
    
    // 4. è¿”å›å¹¶åˆ‡æ¢ä¸»é¢˜
    await page.goBack()
    await page.click('.theme-toggle-btn')
    
    // 5. éªŒè¯ä¸»é¢˜åˆ‡æ¢
    const bodyClass = await page.$eval('body', el => el.className)
    expect(bodyClass).toContain('dark')
  })
})
```

---

## å®æ–½å»ºè®®

### âœ… æ¨èå®æ–½é¡ºåº

1. **ç¬¬ä¸€æ­¥**ï¼šåˆ›å»ºç»„ä»¶ç›®å½•ç»“æ„å’Œç±»å‹å®šä¹‰
2. **ç¬¬äºŒæ­¥**ï¼šå®ç° UserMenu ç»„ä»¶ï¼ˆæœ€ç®€å•ï¼ŒéªŒè¯æ¶æ„ï¼‰
3. **ç¬¬ä¸‰æ­¥**ï¼šå®ç° ThemeToggle ç»„ä»¶
4. **ç¬¬å››æ­¥**ï¼šåˆ›å»º HeaderRight ä¸»ç»„ä»¶å¹¶é›†æˆ
5. **ç¬¬äº”æ­¥**ï¼šå®ç° FullscreenToggle ç»„ä»¶
6. **ç¬¬å…­æ­¥**ï¼šå®ç° NotificationCenter ç»„ä»¶ï¼ˆç®€åŒ–ç‰ˆï¼‰
7. **ç¬¬ä¸ƒæ­¥**ï¼šé›†æˆåˆ° App.vue
8. **ç¬¬å…«æ­¥**ï¼šæµ‹è¯•å’Œä¼˜åŒ–

### âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ¸è¿›å¼å¼€å‘**ï¼šå…ˆå®ç° MVPï¼Œå†é€æ­¥å¢å¼º
2. **å‘åå…¼å®¹**ï¼šç¡®ä¿ä¸å½±å“ç°æœ‰åŠŸèƒ½
3. **æ€§èƒ½ä¼˜åŒ–**ï¼šæ³¨æ„ç»„ä»¶æ¸²æŸ“æ€§èƒ½
4. **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º
5. **ç±»å‹å®‰å…¨**ï¼šä¸¥æ ¼çš„ TypeScript ç±»å‹æ£€æŸ¥
6. **ä»£ç è§„èŒƒ**ï¼šéµå¾ªé¡¹ç›®ç°æœ‰çš„ä»£ç è§„èŒƒ

### ğŸ“ å¼€å‘æ£€æŸ¥æ¸…å•

- [ ] åˆ›å»ºç»„ä»¶ç›®å½•ç»“æ„
- [ ] å®šä¹‰ TypeScript ç±»å‹
- [ ] å®ç° UserMenu ç»„ä»¶
- [ ] å®ç° ThemeToggle ç»„ä»¶
- [ ] å®ç° FullscreenToggle ç»„ä»¶
- [ ] å®ç° NotificationCenter ç»„ä»¶
- [ ] åˆ›å»º HeaderRight ä¸»ç»„ä»¶
- [ ] é›†æˆåˆ° App.vue
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•
- [ ] æ·»åŠ  E2E æµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] å“åº”å¼é€‚é…
- [ ] æ–‡æ¡£æ›´æ–°

---

## æ€»ç»“

### æŠ€æœ¯å¯è¡Œæ€§ï¼šâœ… å®Œå…¨å¯è¡Œ

æ‰€æœ‰åŠŸèƒ½éƒ½å¯ä»¥åŸºäºç°æœ‰æŠ€æœ¯æ ˆå®ç°ï¼Œæ— éœ€å¼•å…¥æ–°çš„ä¸»è¦ä¾èµ–ã€‚

### å®ç°éš¾åº¦ï¼šâ­â­ ä¸­ç­‰

å¤§éƒ¨åˆ†ç»„ä»¶å®ç°ç®€å•ï¼Œåªæœ‰é€šçŸ¥ä¸­å¿ƒå’Œå…¨å±€æœç´¢ç›¸å¯¹å¤æ‚ã€‚

### é£é™©è¯„ä¼°ï¼šğŸŸ¡ ä¸­ç­‰é£é™©

ä¸»è¦é£é™©åœ¨äºæµè§ˆå™¨å…¼å®¹æ€§å’Œæ€§èƒ½ä¼˜åŒ–ï¼Œä½†éƒ½æœ‰æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆã€‚

### å¼€å‘å»ºè®®

1. **é‡‡ç”¨æ¸è¿›å¼å¼€å‘**ï¼šå…ˆå®ç° MVPï¼Œå†é€æ­¥å¢å¼º
2. **ä¼˜å…ˆå®ç°æ ¸å¿ƒåŠŸèƒ½**ï¼šUserMenu å’Œ ThemeToggle
3. **æ³¨æ„æ€§èƒ½ä¼˜åŒ–**ï¼šç‰¹åˆ«æ˜¯é€šçŸ¥ä¸­å¿ƒå’Œæœç´¢åŠŸèƒ½
4. **å®Œå–„æµ‹è¯•è¦†ç›–**ï¼šç¡®ä¿ä»£ç è´¨é‡

### é¢„è®¡æ€»å·¥æ—¶

- **MVP ç‰ˆæœ¬**ï¼š4 å°æ—¶
- **å®Œæ•´ç‰ˆæœ¬**ï¼š16-20 å°æ—¶

---

**æ–‡æ¡£ç»´æŠ¤è€…**: å¼€å‘å·¥ç¨‹å¸ˆ Agent  
**æœ€åæ›´æ–°**: 2025-01-15  
**ç‰ˆæœ¬å†å²**: v1.0 - åˆå§‹ç‰ˆæœ¬

